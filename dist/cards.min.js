"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Cards=function(){function n(e){if(_classCallCheck(this,n),!this._isElement(e))throw new Error("Cards must be initialize on an HTMLDomElement.");this._ref=e,this._length=0,this._selected=null;var t=this;e.addEventListener("click",function(){t._cancelSelect()})}return _createClass(n,[{key:"addChild",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._updateLength(),t=Object.assign({type:"default",title:"Card",disconnected:!1,contact:"小张",rowTitle2:"上月用电量",rowTitle3:"剩余电量",rowData2:"0.0",rowData3:"0.0",unit:"kWh",link:null,key:"key"},t);if(-1===["default","primary","warning","error"].indexOf(t.type))throw new Error('Card type should be among "default", "primary", "warning", "error".');var e=(this._length-1)/5|0,n=this._ref.querySelectorAll(".card-row").item(e);if(!n){var r=document.createElement("div");r.className="card-row",this._ref.appendChild(r),n=this._ref.querySelectorAll(".card-row").item(e)}var a=document.createElement("div");a.className="card-col",a.setAttribute("data-index",this._length);var i=document.createElement("section");i.className=t.type,i.setAttribute("data-key",t.key),i.innerHTML='\n      <header>\n        <div title="'.concat(t.title,'">\n          ').concat(t.title,'\n        </div>\n        <svg class="icon ').concat(t.disconnected?"disconn":"conn",'" aria-hidden="true">\n          <use xlink:href="').concat(t.disconnected?"#icondisconn1":"#iconconn1",'"></use>\n        </svg>\n      </header>\n      <div class="body">\n        <table>\n          <tbody>\n            <tr>\n              <th>联系人</th>\n              <td>').concat(t.contact,"</td>\n            </tr>\n            <tr>\n              <th>").concat(t.rowTitle2,"</th>\n              <td>\n                  <a>\n                    ").concat(t.rowData2," <small>").concat(t.unit,"</small>\n                  </a>\n              </td>\n            </tr>\n            <tr>\n              <th>").concat(t.rowTitle3,'</th>\n              <td class="data">').concat(t.rowData3," <small>").concat(t.unit,"</small></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    ");var c=this;return i.addEventListener("click",function(e){c._onClick(this,c,e)}),i.querySelector(".body a").addEventListener("click",function(){var e=t.link;"function"==typeof e&&e(t.key)}),a.appendChild(i),n.appendChild(a),this._updateLength(),this}},{key:"queryChild",value:function(e){if("number"==typeof e)return this._ref.querySelector("div[data-index=".concat(e,"]"));if("string"==typeof e)return this._ref.querySelectorAll(e);throw new Error("queryChild() accept index|queryString")}},{key:"_onClick",value:function(e,t,n){t._cancelSelect(),e.className+=" selected",t._selected=e.getAttribute("data-key"),n.stopPropagation()}},{key:"_cancelSelect",value:function(){this._ref.querySelectorAll("section.selected").forEach(function(e){e.className=e.className.replace(/\s*selected\s*/g," ")}),this._selected=null}},{key:"_updateLength",value:function(){this._length=this._ref.querySelectorAll(".card-col section").length}},{key:"_isElement",value:function(e){if(e&&1===e.nodeType){if(window.Node&&e instanceof Node)return!0;try{var t=document.createElement("div");t.appendChild(e),t.removeChild(e)}catch(e){return!1}return!0}return!1}},{key:"length",get:function(){return this._length},set:function(e){throw new Error("You shouldn't set length manually.")}},{key:"selected",get:function(){return this._selected},set:function(e){throw new Error("You shouldn't set selected manually.")}}]),n}();